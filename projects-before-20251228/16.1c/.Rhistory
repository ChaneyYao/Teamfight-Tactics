url <- "https://www.googletagservices.com/agrp/prod/model_person_country_code_TW_person_region_code_5457.json"
res <- GET(url)
data <- fromJSON(content(res, as = "text", encoding = "UTF-8"))
library(httr)
library(jsonlite)
library(dplyr)
library(ggplot2)
url <- "https://www.googletagservices.com/agrp/prod/model_person_country_code_TW_person_region_code_5457.json"
res <- GET(url)
data <- fromJSON(content(res, as = "text", encoding = "UTF-8"))
View(data)
url <- "https://ab.dns-finder.com/meta/dns"
res <- GET(url)
data <- fromJSON(content(res, as = "text", encoding = "UTF-8"))
url <- "https://api.metatft.com/public/promotion_thresholds/latest"
res <- GET(url)
data <- fromJSON(content(res, as = "text", encoding = "UTF-8"))
View(data)
url_threshhold <- "https://api.metatft.com/public/promotion_thresholds/latest"
data <- url_threshhold %>%
GET() %>%
fromJSON(content(res, as = "text", encoding = "UTF-8"))
url_threshold <- "https://api.metatft.com/public/promotion_thresholds/latest"
threshold <- url_threshold %>%
GET() %>%
fromJSON(content(res, as = "text", encoding = "UTF-8"))
test = fromJSON(content(GET(url_threshold), as = "text", encoding = "UTF-8"))
url_threshold <- "https://api.metatft.com/public/promotion_thresholds/latest"
threshold = fromJSON(content(GET(url_threshold), as = "text", encoding = "UTF-8"))
rm(list = ls())
library(httr)
library(jsonlite)
library(dplyr)
library(ggplot2)
url_threshold <- "https://api.metatft.com/public/promotion_thresholds/latest"
threshold = fromJSON(content(GET(url_threshold), as = "text", encoding = "UTF-8"))
url_test = "https://api.metatft.com/tft-usercontent/user"
user = fromJSON(content(GET(url_test), as = "text", encoding = "UTF-8"))
View(user)
url_test = "https://match.adsrvr.org/track/rid?ttd_pid=pubmatic&fmt=json"
test = fromJSON(content(GET(url_test), as = "text", encoding = "UTF-8"))
View(test)
url_test = "https://rtbdemand.apiip.net/api/check?accessKey=7ef45bac-167a-4aa8-8c99-bc8a28f80bc5&fields=countryCode,regionCode,regionName,city,timeZone,countryName"
test = fromJSON(content(GET(url_test), as = "text", encoding = "UTF-8"))
View(test)
url_test = "https://gum.criteo.com/sid/json?origin=prebid&topUrl=https%3A%2F%2Fwww.metatft.com%2F&domain=www.metatft.com&bundle=X_ZaIF9ub2N5MHBEUTVVbmtsNEJkdEpGU2RGTjg3eXBZVVhYTEFIclZuQSUyRlpBekhZMzBMdEY1aEtmMEI4ZjJKV2pHbWNGVFluVWZJV05abnRpZ2wwQkUzYVltS0QzS0k3aWZKZG1ZQXdjNVg3SlBpJTJGVGlwT28lMkZ6T3lmYWJwN3NYOXFyRnF1SnE3N3h5QlAlMkJXM3I1ZklXR0lnQSUzRCUzRA&cw=1&lsw=1"
test = fromJSON(content(GET(url_test), as = "text", encoding = "UTF-8"))
url_test = "https://gum.criteo.com/sid/json?origin=prebid&topUrl=https%3A%2F%2Fwww.metatft.com%2F&domain=www.metatft.com&bundle=X_ZaIF9ub2N5MHBEUTVVbmtsNEJkdEpGU2RGTjg3eXBZVVhYTEFIclZuQSUyRlpBekhZMzBMdEY1aEtmMEI4ZjJKV2pHbWNGVFluVWZJV05abnRpZ2wwQkUzYVltS0QzS0k3aWZKZG1ZQXdjNVg3SlBpJTJGVGlwT28lMkZ6T3lmYWJwN3NYOXFyRnF1SnE3N3h5QlAlMkJXM3I1ZklXR0lnQSUzRCUzRA&cw=1&lsw=1"
test = fromJSON(content(GET(url_test), as = "text", encoding = "UTF-8"))
View(test)
url_test = "https://cmp.inmobi.com/GVL-v3/vendor-list-trimmed-v1.json"
test = fromJSON(content(GET(url_test), as = "text", encoding = "UTF-8"))
View(test)
url_test = "https://api.metatft.com/tft-leaderboard/v2/global?offset=0&limit=100"
test = fromJSON(content(GET(url_test), as = "text", encoding = "UTF-8"))
View(test)
library(httr)
library(jsonlite)
library(dplyr)
library(ggplot2)
url_threshold <- "https://api.metatft.com/public/promotion_thresholds/latest"
threshold = fromJSON(content(GET(url_threshold), as = "text", encoding = "UTF-8"))
url_player_stat = "https://api.metatft.com/tft-leaderboard/v2/global?offset=0&limit=100"
player_stat = fromJSON(content(GET(url_test), as = "text", encoding = "UTF-8"))
source("C:/Teamfight-Tactics/Teamfight-Tactics/data/code/20251228-playerdata-IS.R", echo=TRUE)
View(player_stat)
View(player_stat)
player_stat_data = player_stat$data
View(player_stat_data)
# 定義你想要的地區
regions <- c("EUW", "KR", "NA", "TW", "PBE")
# 設定 limit
limit_count <- 1000
# 使用 sprintf 格式化字串生成網址
# %s 會被地區取代，%d 會被數字取代
urls <- setNames(
sprintf("https://api.metatft.com/tft-leaderboard/v2/%s?offset=0&limit=%d", regions, limit_count),
regions
)
# 查看生成的網址
print(urls)
fetch_data <- function(url) {
tryCatch({
# 這裡放入你原本的邏輯
fromJSON(content(GET(url), as = "text", encoding = "UTF-8"))
}, error = function(e) {
message(paste("Error fetching:", url))
return(NULL)
})
}
# 執行批量抓取
# 這會回傳一個 List，裡面包含各個地區的 Data Frame
all_regions_data <- lapply(urls, fetch_data)
# 例如，要看台灣的資料：
# View(all_regions_data$TW)
View(all_regions_data)
# 定義你想要的地區
regions <- c("euw", "kr", "na", "tw", "pbe")
# 設定 limit
limit_count <- 1000
# 使用 sprintf 格式化字串生成網址
# %s 會被地區取代，%d 會被數字取代
urls <- setNames(
sprintf("https://api.metatft.com/tft-leaderboard/v2/%s?offset=0&limit=%d", regions, limit_count),
regions
)
# 查看生成的網址
print(urls)
# 定義抓取函數
fetch_data <- function(url) {
tryCatch({
# 這裡放入你原本的邏輯
fromJSON(content(GET(url), as = "text", encoding = "UTF-8"))
}, error = function(e) {
message(paste("Error fetching:", url))
return(NULL)
})
}
# 執行批量抓取
# 這會回傳一個 List，裡面包含各個地區的 Data Frame
all_regions_data <- lapply(urls, fetch_data)
View(all_regions_data)
View(threshold)
# 定義你想要的地區
regions <- c("euw1", "kr", "na1", "tw2", "pbe")
# 設定 limit
limit_count <- 1000
# 使用 sprintf 格式化字串生成網址
# %s 會被地區取代，%d 會被數字取代
urls <- setNames(
sprintf("https://api.metatft.com/tft-leaderboard/v2/%s?offset=0&limit=%d", regions, limit_count),
regions
)
# 查看生成的網址
print(urls)
# 定義抓取函數
fetch_data <- function(url) {
tryCatch({
# 這裡放入你原本的邏輯
fromJSON(content(GET(url), as = "text", encoding = "UTF-8"))
}, error = function(e) {
message(paste("Error fetching:", url))
return(NULL)
})
}
# 執行批量抓取
# 這會回傳一個 List，裡面包含各個地區的 Data Frame
all_regions_data <- lapply(urls, fetch_data)
View(all_regions_data)
# Preparing for multiple regions IS
## Defining the region names
regions <- c("global","euw1", "kr", "na1", "tw2", "pbe")
## Setting the limit
limit_count <- 1000
## 使用 sprintf 格式化字串生成網址
standard_url = "https://api.metatft.com/tft-leaderboard/v2/%s?offset=0&limit=%d"
urls <- setNames(
sprintf(standard_url, regions, limit_count),
regions
)
# 定義抓取函數
fetch_data <- function(url) {
tryCatch({
# 這裡放入你原本的邏輯
fromJSON(content(GET(url), as = "text", encoding = "UTF-8"))
}, error = function(e) {
message(paste("Error fetching:", url))
return(NULL)
})
}
# 執行批量抓取
# 這會回傳一個 List，裡面包含各個地區的 Data Frame
all_regions_data <- lapply(urls, fetch_data)
View(all_regions_data)
global = all_regions_data$global$data
View(global)
View(global[[15]][[3]])
View(global[[15]][[3]])
global = all_regions_data$global$data$stats
tw = all_regions_data$tw2$data
View(tw)
tw = all_regions_data$tw2$data
str(tw)
tw = all_regions_data$tw2$data$stats$RecentResult$topCarries
View(tw)
tw = all_regions_data$tw2$data$stats
tw = all_regions_data$tw2$data
View(all_regions_data)
saveRDS?
?saveRDS
# 下次要用時，一行讀取，結構完全不變
# my_data <- readRDS("all_regions_tft_data.rds")
# 1. 設定目標資料夾路徑 (注意斜線方向)
target_dir <- "C:/Teamfight-Tactics/Teamfight-Tactics/data/processed"
# 2. 自動檢查資料夾是否存在，如果不存在就建立它 (包含父目錄)
# 這樣就算你的電腦還沒有 'processed' 這個資料夾，程式也會幫你建好，不會報錯
if (!dir.exists(target_dir)) {
dir.create(target_dir, recursive = TRUE)
message("資料夾不存在，已自動建立：", target_dir)
}
# 3. 設定完整檔案名稱 (路徑 + 檔名)
# file.path 會自動處理系統路徑的連接符號，很安全
full_path <- file.path(target_dir, "all_regions_tft_data.rds")
# 4. 執行存檔
saveRDS(all_regions_data, full_path)
message(paste("檔案已成功儲存至：", full_path))
# 1. 設定存檔資料夾
target_dir <- "C:/Teamfight-Tactics/Teamfight-Tactics/data/processed"
if (!dir.exists(target_dir)) dir.create(target_dir, recursive = TRUE)
# 2. 取得今天的日期並轉成 "YYYYMMDD" 格式
today_str <- format(Sys.Date(), "%Y%m%d") # 今天執行會產出 "20251228"
# 3. 使用 paste0 拼接檔名
# 結果會是: 20251228_all_regions_tft_data.rds
file_name <- paste0(today_str, "_all_regions_tft_data.rds")
full_path <- file.path(target_dir, file_name)
# 4. 存檔
saveRDS(all_regions_data, full_path)
message(paste("檔案已成功儲存至：", full_path))
`20251228_all_regions_tft_data` <- readRDS("C:/Teamfight-Tactics/Teamfight-Tactics/data/processed/20251228_all_regions_tft_data.rds")
